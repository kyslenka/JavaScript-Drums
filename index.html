<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Piano Keyboards</title>
    <link href="style.css" rel="stylesheet" />
  </head>
  <body>
    <div class="keys">
      <div data-key="81" class="key">
        <kbd>Q</kbd>
      </div>
      <div data-key="87" class="key">
        <kbd>W</kbd>
      </div>
      <div data-key="69" class="key">
        <kbd>E</kbd>
      </div>
      <div data-key="82" class="key">
        <kbd>R</kbd>
      </div>
      <div data-key="84" class="key">
        <kbd>T</kbd>
      </div>
      <div data-key="89" class="key">
        <kbd>Y</kbd>
      </div>
      <div data-key="85" class="key">
        <kbd>U</kbd>
      </div>
      <div data-key="73" class="key">
        <kbd>I</kbd>
      </div>
    </div>

    <audio data-key="81" src="sounds/do.wav"></audio>
    <audio data-key="87" src="sounds/re.wav"></audio>
    <audio data-key="69" src="sounds/me.wav"></audio>
    <audio data-key="82" src="sounds/fa.wav"></audio>
    <audio data-key="84" src="sounds/sol.wav"></audio>
    <audio data-key="89" src="sounds/la.wav"></audio>
    <audio data-key="85" src="sounds/si.wav"></audio>
    <audio data-key="73" src="sounds/do-octave.wav"></audio>

    <script>
      function playSound(e) {
        const audio = document.querySelector(`audio[data-key="${e.keyCode}"`);
        const key = document.querySelector(`div[data-key="${e.keyCode}"`);
        if (!audio) return;
        audio.currentTime = 0;
        audio.play();
        key.classList.add("playing");
      }

      function removeTransition(e) {
        if (e.propertyName !== "transform") return;
        this.classList.remove("playing");
      }

      const keys = document.querySelectorAll(".key");
      keys.forEach(key =>
        key.addEventListener("transitionend", removeTransition)
      );
      window.addEventListener("keydown", playSound);
    </script>
  </body>
</html>
